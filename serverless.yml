service: mymangalist
frameworkVersion: '2'
useDotenv: true

plugins:
  - serverless-python-requirements
  - serverless-offline

provider:
  name: aws
  runtime: python3.8
  lambdaHashingVersion: 20201221
  stage: ${opt:stage, 'dev'}
  region: us-east-1
  timeout: 90
  logRetentionInDays: 5
  deploymentBucket: ${self:service}-deployment
  tags:
    project: ${self:service}
  iamRoleStatements:
    - Effect: Allow
      Action:
        - s3:*
        - cloudwatch:*
        - dynamodb:*
      Resource: "*"
  environment:
    DYNAMODB_MANGAS_TABLE_NAME: ${self:service}_${self:provider.stage}_mangas

functions:
  - ${file(src/functions/create-new-manga/function.yml)}

#resources:
#  - ${file(resources/dynamodb/manga-table.yml)}
